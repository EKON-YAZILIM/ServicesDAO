@{
    Layout = "../Shared/_PublicLayout.cshtml";
}
@model List<Helpers.Models.WebsiteViewModels.AuctionViewModel>

<main class="nk-pages">
    <section class="section section-contact bg-transparent">
        <!-- Tab list -->
        <ul class="nav nav-underline border-0 mb-3" role="tablist">
            <li class="nav-item mx-2">
                <a class="nav-link active" data-coreui-toggle="tab" href="#activeAuctionsTab" role="tab" aria-selected="false">
                    <svg class="icon me-2">
                        <use xlink:href="/Home/images/svg/free.svg#cil-media-play"></use>
                    </svg>Active
                </a>
            </li>
            <li class="nav-item mx-2">
                <a class="nav-link" data-coreui-toggle="tab" href="#completedAuctionsTab" role="tab" aria-selected="true">
                    <svg class="icon me-2">
                        <use xlink:href="/Home/images/svg/free.svg#cil-check"></use>
                    </svg>Completed
                </a>
            </li>
        </ul>

        <!-- Content -->
        <div class="tab-content rounded-bottom mt-2">
            <!-- Tab panel -->
            <div class="tab-pane active" role="tabpanel" id="activeAuctionsTab">
                <!-- .card -->
                <div class="card mb-4">
                    <div class="card-header">
                        <span class="small ms-1"><b>Active Internal Auctions</b></span>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive h-250">
                            @if (Model.Where(x => x.Status == Helpers.Constants.Enums.AuctionStatusTypes.InternalBidding).Count() > 0)
                            {
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">Job Name</th>
                                            <th scope="col">Auction Start Date</th>
                                            <th scope="col">Auction End Date</th>
                                            <th scope="col">Time Left</th>
                                            <th scope="col">Bid Count</th>
                                            <th scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            var internalAuctions = Model.Where(x => x.Status == Helpers.Constants.Enums.AuctionStatusTypes.InternalBidding).ToList();

                                            @foreach (var auction in internalAuctions)
                                            {
                                                <tr>
                                                    <th scope="row">@auction.AuctionID</th>
                                                    <td><a href="../Job-Detail/@auction.JobID">@DAO_WebPortal.Utility.StringHelper.ShortenString(auction.Title, 25)</a></td>
                                                    <td>@auction.InternalAuctionEndDate.ToString("MM/dd/yyyy")</td>
                                                    <td>@auction.PublicAuctionEndDate.ToString("MM/dd/yyyy")</td>
                                                    <td><b id="counter_@auction.AuctionID"></b></td>
                                                    <td>@auction.BidCount</td>
                                                    <td>
                                                        <a class="btn btn-sm btn-primary me-2" href="../Auction-Detail/@auction.AuctionID">
                                                            <svg class="icon">
                                                                <use xlink:href="/Home/images/svg/free.svg#cil-notes"></use>
                                                            </svg> Show Bids
                                                        </a>
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            }
                            else
                            {
                                <partial name="~/Views/Shared/_EmptyPartial.cshtml" view-data='new ViewDataDictionary(ViewData) { { "Message", "Auction not found." } }' />
                            }
                        </div>
                    </div>
                </div> <!-- .card -->
                <!-- .card -->
                <div class="card">
                    <div class="card-header"><span class="small ms-1"><b>Active Public Auctions</b></span></div>
                    <div class="card-body p-0">
                        <div class="table-responsive h-250">
                            @if (Model.Where(x => x.Status == Helpers.Constants.Enums.AuctionStatusTypes.PublicBidding).Count() > 0)
                            {
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">Job Name</th>
                                            <th scope="col">Auction Start Date</th>
                                            <th scope="col">Auction End Date</th>
                                            <th scope="col">Time Left</th>
                                            <th scope="col">Bid Count</th>
                                            <th scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            var publicAuctions = Model.Where(x => x.Status == Helpers.Constants.Enums.AuctionStatusTypes.PublicBidding).ToList();

                                            @foreach (var auction in publicAuctions)
                                            {
                                                <tr>
                                                    <th scope="row">@auction.AuctionID</th>
                                                    <td><a href="../Job-Detail/@auction.JobID">@DAO_WebPortal.Utility.StringHelper.ShortenString(auction.Title, 25)</a></td>
                                                    <td>@auction.InternalAuctionEndDate.ToString("MM/dd/yyyy")</td>
                                                    <td>@auction.PublicAuctionEndDate.ToString("MM/dd/yyyy")</td>
                                                    <td><b id="counter_@auction.AuctionID"></b></td>
                                                    <td>@auction.BidCount</td>
                                                    <td>
                                                        <a class="btn btn-sm btn-primary me-2" href="../Auction-Detail/@auction.AuctionID">
                                                            <svg class="icon">
                                                                <use xlink:href="/Home/images/svg/free.svg#cil-notes"></use>
                                                            </svg> Show Bids
                                                        </a>
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            }
                            else
                            {
                                <partial name="~/Views/Shared/_EmptyPartial.cshtml" view-data='new ViewDataDictionary(ViewData) { { "Message", "Auction not found." } }' />
                            }
                        </div>
                    </div>
                </div> <!-- .card -->
            </div>
            <!-- Tab panel -->
            <div class="tab-pane" role="tabpanel" id="completedAuctionsTab">
                <!-- .card -->
                <div class="card mb-4">
                    <div class="card-header">
                        <span class="small ms-1"><b>Completed Auctions</b></span>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive h-250">
                            @if (Model.Where(x => x.Status == Helpers.Constants.Enums.AuctionStatusTypes.Completed).Count() > 0)
                            {
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">Job Name</th>
                                            <th scope="col">Auction Start Date</th>
                                            <th scope="col">Auction End Date</th>
                                            <th scope="col">Winner User</th>
                                            <th scope="col">Bid Count</th>
                                            <th scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            var completedAuctions = Model.Where(x => x.Status == Helpers.Constants.Enums.AuctionStatusTypes.Completed).ToList();

                                            @foreach (var auction in completedAuctions)
                                            {
                                                <tr>
                                                    <th scope="row">@auction.AuctionID</th>
                                                    <td><a href="../Job-Detail/@auction.JobID">@DAO_WebPortal.Utility.StringHelper.ShortenString(auction.Title, 25)</a></td>
                                                    <td>@auction.InternalAuctionEndDate.ToString("MM/dd/yyyy")</td>
                                                    <td>@auction.PublicAuctionEndDate.ToString("MM/dd/yyyy")</td>
                                                    <td>@auction.WinnerUserName</td>
                                                    <td>@auction.BidCount</td>
                                                    <td>
                                                        <a class="btn btn-sm btn-primary me-2" href="../Auction-Detail/@auction.AuctionID">
                                                            <svg class="icon">
                                                                <use xlink:href="/Home/images/svg/free.svg#cil-notes"></use>
                                                            </svg> Show Bids
                                                        </a>
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            }
                            else
                            {
                                <partial name="~/Views/Shared/_EmptyPartial.cshtml" view-data='new ViewDataDictionary(ViewData) { { "Message", "Auction not found." } }' />
                            }
                        </div>
                    </div>
                </div><!-- .card -->
                <!-- .card -->
                <div class="card">
                    <div class="card-header"><span class="small ms-1"><b>Expired Auctions</b></span></div>
                    <div class="card-body p-0">
                        <div class="table-responsive h-250">
                            @if (Model.Where(x => x.Status == Helpers.Constants.Enums.AuctionStatusTypes.Expired).Count() > 0)
                            {
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">Job Name</th>
                                            <th scope="col">Auction Start Date</th>
                                            <th scope="col">Auction End Date</th>
                                            <th scope="col">Winner User</th>
                                            <th scope="col">Bid Count</th>
                                            <th scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            var expiredAuctions = Model.Where(x => x.Status == Helpers.Constants.Enums.AuctionStatusTypes.Expired).ToList();

                                            @foreach (var auction in expiredAuctions)
                                            {
                                                <tr>
                                                    <th scope="row">@auction.AuctionID</th>
                                                    <td><a href="../Job-Detail/@auction.JobID">@DAO_WebPortal.Utility.StringHelper.ShortenString(auction.Title, 25)</a></td>
                                                    <td>@auction.InternalAuctionEndDate.ToString("MM/dd/yyyy")</td>
                                                    <td>@auction.PublicAuctionEndDate.ToString("MM/dd/yyyy")</td>
                                                    <td>-</td>
                                                    <td>@auction.BidCount</td>
                                                    <td>
                                                        <a class="btn btn-sm btn-primary me-2" href="../Auction-Detail/@auction.AuctionID">
                                                            <svg class="icon">
                                                                <use xlink:href="/Home/images/svg/free.svg#cil-notes"></use>
                                                            </svg> Show Bids
                                                        </a>
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            }
                            else
                            {
                                <partial name="~/Views/Shared/_EmptyPartial.cshtml" view-data='new ViewDataDictionary(ViewData) { { "Message", "Auction not found." } }' />
                            }
                        </div>
                    </div>
                </div><!-- .card -->
            </div>
        </div>
    </section>
</main>
