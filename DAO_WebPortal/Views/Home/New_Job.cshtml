@using DAO_WebPortal.Resources
@{
    Layout = "../Shared/_MainLayout.cshtml";

}
<div class="row my-3">
    <div class="col-md-12">
        <h4 class="mb-3">Job Posting Rules</h4>
        <p><small>1. The job description should be written in a way that is comprehensive and describes the details of the job.</small></p>
        <p><small>2. The completion criteria for the work should be clearly stated and should not allow any misunderstanding.</small></p>
        <p><small>3. Job posts will be available in forum after system admin approval.</small></p>
        <p><small>4. If no bids are received at the end of the internal auction and public auction period, the job post will be marked as expired.</small></p>
    </div>
</div>

<!--Row-->
<div class="row">
    <div class="col-md-12">
        <div class="form-group mb-4">
            <label class="mb-2" for="title"><b>Title</b></label>
            <input type="text" class="form-control" id="title" placeholder="Title">
        </div>
        <div class="row">
            <div class="col-md-6">
                <label class="mb-2" for="title"><b>Total Budget</b></label>
                <div class="input-group mb-3">
                    <span class="input-group-text">€</span>
                    <input class="form-control number" type="text" aria-label="Amount" placeholder="Amount" id="amount" oninput="CheckNumbers(this)"><span class="input-group-text">.00</span>
                </div>
            </div>
            <div class="col-md-6">
                <label class="mb-2" for="title"><b>Expected Time Frame</b></label>
                <div class="input-group mb-3">
                    <input class="form-control number" type="text" aria-label="Time Frame" placeholder="Time Frame" id="time" oninput="CheckNumbers(this)"><span class="input-group-text">days</span>
                </div>
            </div>
        </div>
        <div class="form-group mb-3">
            <label class="mb-2" for="description"><b>Job Description</b></label>
            <textarea type="text" class="form-control" id="description" placeholder="Job Description" rows="10"></textarea>
        </div>
        <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-primary" onclick="NewJob();">Submit Job</button>
        </div>
    </div>
</div>
<script>
    //Add new job function
    function NewJob() {

        $.confirm({
            title: 'Confirmation',
            content: '<b>By posting a job, you unconditionally and irrevocably agree: </b>' +

                '<div class="form-check m-2"><input class="form-check-input" type="checkbox" value="" id="checkConfirm1"><label class="form-check-label text-justify" for="flexCheckDefault">To be legally bound by the terms and conditions stated in your job posting and the winning bid selected by yourself; that a binding legal relationship is established between you and the winning bidder selected by yourself; to deposit the amount offered by the selected winning bid as remuneration into an escrow smart contract provided by CRDAO; and that unless specified otherwise in your job posting or the winning bid selected by yourself, the relationship between you, the winning bidder, and CRDAO is exclusively governed by the general terms and conditions of CRDAO</label></div>'
            ,
            columnClass: 'col-md-8 col-md-offset-2',
            buttons: {
                cancel: {
                    text: 'Cancel'
                },
                confirm: {
                    text: 'Continue',
                    btnClass: 'btn btn-primary',
                    action: function () {

                        if (!$("#checkConfirm1").is(":checked")) {
                            toastr.warning("You must confirm agreements.");
                            return false;
                        }

                        //Create job model
                        var title = $('#title').val()
                        var amount = $('#amount').val();
                        var time = $('#time').val();
                        var description = $('#description').val();
                        //Ajax post action
                        $.ajax({
                            type: "POST",
                            url: "../Home/New_Job_Post",
                            data: { "title": title, "amount": amount, "time": time, "description": description },
                            success: function (result) {
                                if (result.success) {
                                    window.location.href = "./My-Jobs";
                                }
                                else {
                                    toastr.warning(result.message);
                                }
                            },
                                failure: function (response) {
                                    toastr.warning("@Lang.ConnectionError");
                            },
                            error: function (response) {
                                    toastr.error("@Lang.UnexpectedError");
                            }
                        });


                    }

                }
            }
        });


        }
</script>